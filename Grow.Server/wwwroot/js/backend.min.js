function create_search_entity_function(n,t){var r,u=url_search_entities_prefix+n,i=$("#"+t);return n=>{var t=n.target,e=$(t).val(),f=$.now(),o=n=>{$("input, select").each((t,i)=>{var r=$(i).attr("name");r&&(r=r.substring(0,1).toLowerCase()+r.substring(1),r!=="isActive")&&(n[r]&&$(i).val(n[r]),$(i).attr("type")==="checkbox"&&$(i).prop("checked",n[r]))})},s=n=>{$(t).removeClass("loading");var r=i.attr("output-version");r!==undefined&&r>f||($(i).show(),i.attr("output-version",f),i.html("<li disabled>-- Select or search again --<\/li>"),n.forEach(n=>{var r=n.name,t;r+=" (created at "+n.createdAt.substring(0,10)+")";t=document.createElement("li");t.innerHTML=r;t.addEventListener("click",()=>o(n));i.append(t)}))},h=()=>{$(t).removeClass("loading");var n="Error fetching entities via AJAX";console.log(n);i.append("<li>"+n+"<\/li>")};clearTimeout(r);r=setTimeout(()=>{$(t).addClass("loading"),$.get(u,{search:e},s).fail(h)},2e3)}}function create_image_upload_function(){return n=>{for(var e,o,t=n.target,s=$(t).attr("dat-category"),r=$($(t).attr("dat-output")),u=t.files,f=new FormData,i=0;i<u.length;i++)f.append("fileData",u[i]);e=n=>{if($(t).removeClass("loading"),r){var i=document.createElement("option");i.innerHTML=n.name;i.value=n.id;r.append(i)}};o=()=>{$(t).removeClass("loading");console.log("Error fetching entities via AJAX")};$(t).addClass("loading");$.ajax({url:url_create_file_prefix+s,type:"POST",dataType:"json",data:f,contentType:!1,processData:!1,sucess:e,error:o})}}url_select_year="/Admin/Home/SetYear";url_create_file_prefix="/Admin/Api/File?category=";url_search_entities_prefix="/Admin/Api/";var debug;$(document).ready(function(){var n=$("#contest-selector");n.change(function(){var t=n.children("option:selected").val();$.post(url_select_year,{year:t},function(){location.reload()})});$(".img-selector input[type=file]").change(create_image_upload_function(this))});